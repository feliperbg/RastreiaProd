const passwordField = document.getElementById("password");
const togglePassword = document.querySelector(".password-toggle-icon i");

togglePassword.addEventListener("click", function () {
  if (passwordField.type === "password") {
    passwordField.type = "text";
    togglePassword.classList.remove("fa-eye");
    togglePassword.classList.add("fa-eye-slash");
  } else {
    passwordField.type = "password";
    togglePassword.classList.remove("fa-eye-slash");
    togglePassword.classList.add("fa-eye");
  }
});
            const btnLogin = document.getElementById('btnLogin');
            const txtEmail = document.getElementById("txtEmail");
            const txtSenha = document.getElementById("txtSenha");
            const divResposta = document.getElementById("divResposta");
            btnLogin.onclick = function(event) {
                event.preventDefault(); // Evita o comportamento padrão do botão
                fazerLogin();
            }
        
            function fazerLogin() {
                const email = txtEmail.value.trim(); // Remove espaços em branco
                const senha = txtSenha.value.trim(); // Remove espaços em branco
                const dados = { 
                        email: email,
                        senha: senha
                    };
                console.log(dados);
                const uri = '/login';
                fetch(uri, {
                    method: "POST",
                    body: JSON.stringify(dados)
                }).then((resposta_backEnd)=>{
                    return resposta_backEnd.text();
                }).then((texto_resposta_back)=>{
                    console.log(texto_resposta_back);
                    
                    processarResultados(texto_resposta_back);
                }).catch((error)=>{
                    console.log(error);
                })
            }
            function processarResultados(texto_json){
                const dados = JSON.parse(texto_json);
                if(dados.status==false){
                    divResposta.innerHTML = "Usuário ou senha inválida"; // Set the HTML content
                }else{
                    alert("Login feito com sucesso");
                    localStorage.setItem("dados",texto_json);
                    window.location.href = 'painel.html';
                }
            }